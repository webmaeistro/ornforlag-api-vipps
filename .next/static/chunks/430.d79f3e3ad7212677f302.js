"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[430],{7430:function(e,n,t){t.r(n),t.d(n,{default:function(){return l}});var c=t(266),i=t(809),a=t.n(i),r=t(7294),o=t(2756),s=t(3475),u=t(5893);function l(e){var n=e.checkoutModel,t=e.basketActions,i=e.onSuccess,l=(0,o.$G)("checkout").t,d=(0,r.useState)("loading"),p=d[0],h=d[1];return(0,r.useEffect)((function(){function e(){return(e=(0,c.Z)(a().mark((function e(){var c,r,o,u,l,d,p,k;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h("loading"),e.next=3,(0,s.Z)({query:"\n          mutation vippsInitiatePayment(\n            $checkoutModel: CheckoutModelInput!\n          ) {\n            paymentProviders {\n              vipps {\n                initiatePayment(\n                  checkoutModel: $checkoutModel\n                ) {\n                  success\n                  checkoutLink\n                  crystallizeOrderId\n                }\n              }\n            }\n          }\n        ",variables:{checkoutModel:n}});case 3:u=e.sent,l=(null===(c=u.data)||void 0===c||null===(r=c.paymentProviders)||void 0===r||null===(o=r.vipps)||void 0===o?void 0:o.initiatePayment)||{},d=l.success,p=l.crystallizeOrderId,k=l.checkoutLink,d?(t.setCrystallizeOrderId(p),i(k)):h("error");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),"error"===p?(0,u.jsx)("p",{children:l("loadingPaymentGatewayFailed",{name:"Vipps"})}):(0,u.jsx)("p",{children:l("loadingPaymentGateway")})}}}]);